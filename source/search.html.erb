<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Flexera CMP Docs - Search</title>

    <link href="https://my.rightscale.com/favicon.ico" rel="icon">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/instantsearch.js/1/instantsearch.min.css">

    <%= stylesheet_link_tag "main" %>

    <script src="https://cdn.jsdelivr.net/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/instantsearch.js/1/instantsearch.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>

    <script>
      $('document').ready(function () {
        var search = instantsearch({appId: 'BH4D9OD16A', apiKey: 'b58c3ad6ab9d6e3cd425867d64a6766f', indexName: 'rightscale', urlSync: true});

        search.addWidget(instantsearch.widgets.searchBox({container: '#ais-input-container', placeholder: 'Search the docs...', autofocus: false, poweredBy: true}));

        search.addWidget(instantsearch.widgets.hits({
          container: '#ais-results-container',
          templates: {
            empty: 'No results',
            item: $('#ais-results-template').html()
          },
          hitsPerPage: 16
        }));

        search.addWidget(instantsearch.widgets.pagination({
          container: '#ais-pagination-container', maxPages: 20,
          // default is to scroll to 'body', here we disable this behavior
          scrollTo: false
        }));

        search.start();
      });
    </script>

    <%= javascript_include_tag "main", type: false %>

  </head>
  <body class="index-search">
    <%= partial "partials/search-header" %>
    <div class="search-container">
      <div class="container">
        <div id="ais-input-container" class="col-md-6 col-md-offset-3"></div>
      </div>
    </div>
    <div class="container">
      <div id="ais-results-container"></div>
      <div id="ais-pagination-container"></div>
    </div>

    <footer class="main-footer" role="contentinfo">
      <div class="container-fluid max-width">
        <div class="row">
          <div class="col-sm-10">
            <ul class="list-inline">
              <li>
                <small>&copy; <%= Time.now.year %> RightScale, Inc.</small>
              </li>
              <li>
                <a href="http://www.rightscale.com/" target="_blank">
                  <small>RightScale Home</small>
                </a>
              </li>
              <li>
                <a href="http://www.rightscale.com/jobs" target="_blank">
                  <small>We're Hiring</small>
                </a>
              </li>
              <li>
                <a href="http://eng.rightscale.com/" target="_blank">
                  <small>Engineering Blog</small>
                </a>
              </li>
              <li>
                <a href="http://feedback.rightscale.com/" target="_blank">
                  <small>Feedback</small>
                </a>
              </li>
              <li>
                <a href="http://chat.rightscale.com/" target="_blank">
                  <small>Chat with us!</small>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <script type="text/template" id="ais-results-template">
      <div class="ais-result">
        <a href="{{url}}">
          {{#hierarchy.lvl0}}
            <div class="ais-lvl0">
              {{{_highlighResult.hierarchy.lvl0.value}}}
            </div>
          {{/hierarchy.lvl0}}

          <div class="ais-lvl1">
            {{#hierarchy.lvl1}}
              {{{_highlightResult.hierarchy.lvl1.value}}}
            {{/hierarchy.lvl1}}

            {{#hierarchy.lvl2}}
              >
              {{{_highlightResult.hierarchy.lvl2.value}}}
            {{/hierarchy.lvl2}}

            {{#hierarchy.lvl3}}
              >
              {{{_highlightResult.hierarchy.lvl3.value}}}
            {{/hierarchy.lvl3}}

            {{#hierarchy.lvl4}}
              >
              {{{_highlightResult.hierarchy.lvl4.value}}}
            {{/hierarchy.lvl4}}
          </div>

          <div class="ais-content">
            {{{#content}}}
            {{{_highlightResult.content.value}}}
            {{{/content}}}
          </div>
        </a>
      </div>
    </script>

  </body>

</body>
</html>
